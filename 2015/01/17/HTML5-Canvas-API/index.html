<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>HTML5--Canvas API | Lanceng&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="概述Canvas API（画布）用于在网页实时生成图像，并且可以操作图像内容，基本上它是一个可以用JavaScript操作的位图（bitmap）。使用前，首先需要新建一个canvas网页元素。">
<meta property="og:type" content="article">
<meta property="og:title" content="HTML5--Canvas API">
<meta property="og:url" content="http://lanceng.com/2015/01/17/HTML5-Canvas-API/index.html">
<meta property="og:site_name" content="Lanceng's Blog">
<meta property="og:description" content="概述Canvas API（画布）用于在网页实时生成图像，并且可以操作图像内容，基本上它是一个可以用JavaScript操作的位图（bitmap）。使用前，首先需要新建一个canvas网页元素。">
<meta property="og:updated_time" content="2015-01-17T09:39:25.996Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="HTML5--Canvas API">
<meta name="twitter:description" content="概述Canvas API（画布）用于在网页实时生成图像，并且可以操作图像内容，基本上它是一个可以用JavaScript操作的位图（bitmap）。使用前，首先需要新建一个canvas网页元素。">
  
    <link rel="alternative" href="/atom.xml" title="Lanceng&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/favicon.png" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Smile Zhang</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						
						<li>Über</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/about">关于我</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/lanceng" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/lanceng123/home" title="weibo">weibo</a>
					        
								<a class="mail" target="_blank" href="http://mail.126.com/" title="mail">mail</a>
					        
								<a class="rss" target="_blank" href="https://github.com/lanceng" title="rss">rss</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/Hexo/" style="font-size: 20px;">Hexo</a> <a href="/tags/ORACLE/" style="font-size: 10px;">ORACLE</a> <a href="/tags/Spring、Mybatis、Oracle/" style="font-size: 10px;">Spring、Mybatis、Oracle</a> <a href="/tags/canvas画布/" style="font-size: 10px;">canvas画布</a> <a href="/tags/excel操作/" style="font-size: 10px;">excel操作</a> <a href="/tags/mongodb数据-nodejs/" style="font-size: 10px;">mongodb数据 nodejs</a> <a href="/tags/node-js开发/" style="font-size: 10px;">node.js开发</a> <a href="/tags/svg-api/" style="font-size: 10px;">svg api</a> <a href="/tags/兼容性/" style="font-size: 10px;">兼容性</a> <a href="/tags/博客编写工具/" style="font-size: 10px;">博客编写工具</a> <a href="/tags/图形判断/" style="font-size: 10px;">图形判断</a> <a href="/tags/开发工具/" style="font-size: 20px;">开发工具</a> <a href="/tags/直销系统基金知识/" style="font-size: 10px;">直销系统基金知识</a>
					</div>
				</section>
				
				
				

				
				
				<section class="switch-part switch-part3">
				
					<div id="js-aboutme">如果不想放弃，那就拼命坚持，直到拼尽全力，直到自己不留遗憾！</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Smile Zhang</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="/favicon.png" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">Smile Zhang</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/about">关于我</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/lanceng" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/lanceng123/home" title="weibo">weibo</a>
			        
						<a class="mail" target="_blank" href="http://mail.126.com/" title="mail">mail</a>
			        
						<a class="rss" target="_blank" href="https://github.com/lanceng" title="rss">rss</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap"><article id="post-HTML5-Canvas-API" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/01/17/HTML5-Canvas-API/" class="article-date">
  	<time datetime="2015-01-17T08:31:23.000Z" itemprop="datePublished">2015-01-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      HTML5--Canvas API
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/canvas画布/">canvas画布</a></li></ul>
	</div>

        
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/HTML5/">HTML5</a>
	</div>


        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>Canvas API（画布）用于在网页实时生成图像，并且可以操作图像内容，基本上它是一个可以用JavaScript操作的位图（bitmap）。<br>使用前，首先需要新建一个canvas网页元素。<br><a id="more"></a><br>    <canvas id="myCanvas" width="400" height="200"><br>         您的浏览器不支持canvas！<br>    </canvas>    </p>
<p>上面代码中，如果浏览器不支持这个API，则就会显示canvas标签中间的文字——“您的浏览器不支持canvas！”。<br>每个canvas元素都有一个对应的context对象（上下文对象），Canvas API定义在这个context对象上面，所以需要获取这个对象，方法是使用getContext方法。    </p>
<pre><code>var canvas = document.getElementById(&apos;myCanvas&apos;);

if (canvas.getContext) {
var ctx = canvas.getContext(&apos;2d&apos;);
}     
</code></pre><p>上面代码中，getContext方法指定参数2d，表示该canvas对象用于生成2D图案（即平面图案）。如果参数是3d，就表示用于生成3D图像（即立体图案），这部分实际上单独叫做WebGL API（本书不涉及）。     </p>
<h2 id="绘图方法"><a href="#绘图方法" class="headerlink" title="绘图方法"></a>绘图方法</h2><p>canvas画布提供了一个用来作图的平面空间，该空间的每个点都有自己的坐标，x表示横坐标，y表示竖坐标。原点(0, 0)位于图像左上角，x轴的正向是原点向右，y轴的正向是原点向下。     </p>
<h3 id="（1）绘制路径"><a href="#（1）绘制路径" class="headerlink" title="（1）绘制路径"></a>（1）绘制路径</h3><p>beginPath方法表示开始绘制路径，moveTo(x, y)方法设置线段的起点，lineTo(x, y)方法设置线段的终点，stroke方法用来给透明的线段着色。    </p>
<pre><code>ctx.beginPath(); // 开始路径绘制
ctx.moveTo(20, 20); // 设置路径起点，坐标为(20,20)
ctx.lineTo(200, 20); // 绘制一条到(200,20)的直线
ctx.lineWidth = 1.0; // 设置线宽
ctx.strokeStyle = &quot;#CC0000&quot;; // 设置线的颜色
ctx.stroke(); // 进行线的着色，这时整条线才变得可见      
</code></pre><p>moveto和lineto方法可以多次使用。最后，还可以使用closePath方法，自动绘制一条当前点到起点的直线，形成一个封闭图形，省却使用一次lineto方法。     </p>
<h3 id="（2）绘制矩形"><a href="#（2）绘制矩形" class="headerlink" title="（2）绘制矩形"></a>（2）绘制矩形</h3><p>fillRect(x, y, width, height)方法用来绘制矩形，它的四个参数分别为矩形左上角顶点的x坐标、y坐标，以及矩形的宽和高。fillStyle属性用来设置矩形的填充色。      </p>
<pre><code>ctx.fillStyle = &apos;yellow&apos;;
ctx.fillRect(50, 50, 200, 100);    
</code></pre><p>strokeRect方法与fillRect类似，用来绘制空心矩形。    </p>
<pre><code>ctx.strokeRect(10,10,200,100);    
</code></pre><p>clearRect方法用来清除某个矩形区域的内容。    </p>
<pre><code>ctx.clearRect(100,50,50,50);    
</code></pre><h3 id="（3）绘制文本"><a href="#（3）绘制文本" class="headerlink" title="（3）绘制文本"></a>（3）绘制文本</h3><p>fillText(string, x, y) 用来绘制文本，它的三个参数分别为文本内容、起点的x坐标、y坐标。使用之前，需用font设置字体、大小、样式（写法类似与CSS的font属性）。与此类似的还有strokeText方法，用来添加空心字。     </p>
<pre><code>// 设置字体
ctx.font = &quot;Bold 20px Arial&quot;; 
// 设置对齐方式
ctx.textAlign = &quot;left&quot;;
// 设置填充颜色
ctx.fillStyle = &quot;#008600&quot;; 
// 设置字体内容，以及在画布上的位置
ctx.fillText(&quot;Hello!&quot;, 10, 50); 
// 绘制空心字
ctx.strokeText(&quot;Hello!&quot;, 10, 100);    
</code></pre><p>fillText方法不支持文本断行，即所有文本出现在一行内。所以，如果要生成多行文本，只有调用多次fillText方法。     </p>
<h3 id="（4）绘制圆形和扇形"><a href="#（4）绘制圆形和扇形" class="headerlink" title="（4）绘制圆形和扇形"></a>（4）绘制圆形和扇形</h3><p>arc方法用来绘制扇形。    </p>
<pre><code>ctx.arc(x, y, radius, startAngle, endAngle, anticlockwise);    
</code></pre><p>arc方法的x和y参数是圆心坐标，radius是半径，startAngle和endAngle则是扇形的起始角度和终止角度（以弧度表示），anticlockwise表示做图时应该逆时针画（true）还是顺时针画（false）。<br>下面是如何绘制实心的圆形。      </p>
<pre><code>ctx.beginPath(); 
ctx.arc(60, 60, 50, 0, Math.PI*2, true); 
ctx.fillStyle = &quot;#000000&quot;; 
ctx.fill();      
</code></pre><p>绘制空心圆形的例子。     </p>
<pre><code>ctx.beginPath(); 
ctx.arc(60, 60, 50, 0, Math.PI*2, true); 
ctx.lineWidth = 1.0; 
ctx.strokeStyle = &quot;#000&quot;; 
ctx.stroke();    
</code></pre><p>###（5）设置渐变色</p>
<p>createLinearGradient方法用来设置渐变色。    </p>
<pre><code>var myGradient = ctx.createLinearGradient(0, 0, 0, 160); 

myGradient.addColorStop(0, &quot;#BABABA&quot;); 

myGradient.addColorStop(1, &quot;#636363&quot;);   
</code></pre><p>createLinearGradient方法的参数是(x1, y1, x2, y2)，其中x1和y1是起点坐标，x2和y2是终点坐标。通过不同的坐标值，可以生成从上至下、从左到右的渐变等等。<br>使用方法如下：     </p>
<pre><code>ctx.fillStyle = myGradient;
ctx.fillRect(10,10,200,100);    
</code></pre><h3 id="（6）设置阴影"><a href="#（6）设置阴影" class="headerlink" title="（6）设置阴影"></a>（6）设置阴影</h3><p>一系列与阴影相关的方法，可以用来设置阴影。     </p>
<pre><code>ctx.shadowOffsetX = 10; // 设置水平位移
ctx.shadowOffsetY = 10; // 设置垂直位移
ctx.shadowBlur = 5; // 设置模糊度
ctx.shadowColor = &quot;rgba(0,0,0,0.5)&quot;; // 设置阴影颜色

ctx.fillStyle = &quot;#CC0000&quot;; 
ctx.fillRect(10,10,200,100);    
</code></pre><h2 id="图像处理方法"><a href="#图像处理方法" class="headerlink" title="图像处理方法"></a>图像处理方法</h2><h3 id="drawImage方法"><a href="#drawImage方法" class="headerlink" title="drawImage方法"></a>drawImage方法</h3><p>canvas允许将图像文件插入画布，做法是读取图片后，使用drawImage方法在画布内进行重绘。     </p>
<pre><code>var img = new Image();

img.src = &quot;image.png&quot;;

ctx.drawImage(img, 0, 0); // 设置对应的图像对象，以及它在画布上的位置    
</code></pre><p>由于图像的载入需要时间，drawImage方法只能在图像完全载入后才能调用，因此上面的代码需要改写。    </p>
<pre><code>var image = new Image(); 

image.onload = function() { 

    if (image.width != canvas.width)
        canvas.width = image.width;
    if (image.height != canvas.height)
        canvas.height = image.height;

    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.drawImage(image, 0, 0);

} 

image.src = &quot;image.png&quot;;    
</code></pre><p>drawImage()方法接受三个参数，第一个参数是图像文件的DOM元素（即img标签），第二个和第三个参数是图像左上角在Canvas元素中的坐标，上例中的（0, 0）就表示将图像左上角放置在Canvas元素的左上角。    </p>
<h3 id="getImageData方法，putImageData方法"><a href="#getImageData方法，putImageData方法" class="headerlink" title="getImageData方法，putImageData方法"></a>getImageData方法，putImageData方法</h3><p>getImageData方法可以用来读取Canvas的内容，返回一个对象，包含了每个像素的信息。     </p>
<pre><code>var imageData = context.getImageData(0, 0, canvas.width, canvas.height);   
</code></pre><p>imageData对象有一个data属性，它的值是一个一维数组。该数组的值，依次是每个像素的红、绿、蓝、alpha通道值，因此该数组的长度等于 图像的像素宽度 x 图像的像素高度 x 4，每个值的范围是0–255。这个数组不仅可读，而且可写，因此通过操作这个数组的值，就可以达到操作图像的目的。修改这个数组以后，使用putImageData方法将数组内容重新绘制在Canvas上。   </p>
<pre><code>context.putImageData(imageData, 0, 0);    
</code></pre><h3 id="toDataURL方法"><a href="#toDataURL方法" class="headerlink" title="toDataURL方法"></a>toDataURL方法</h3><p>对图像数据做出修改以后，可以使用toDataURL方法，将Canvas数据重新转化成一般的图像文件形式。    </p>
<pre><code>function convertCanvasToImage(canvas) {
  var image = new Image();
  image.src = canvas.toDataURL(&quot;image/png&quot;);
  return image;
}   
</code></pre><p>上面的代码将Canvas数据，转化成PNG data URI。    </p>
<h3 id="save方法，restore方法"><a href="#save方法，restore方法" class="headerlink" title="save方法，restore方法"></a>save方法，restore方法</h3><p>save方法用于保存上下文环境，restore方法用于恢复到上一次保存的上下文环境。     </p>
<pre><code>ctx.save(); 

ctx.shadowOffsetX = 10;
ctx.shadowOffsetY = 10;
ctx.shadowBlur = 5;
ctx.shadowColor = &quot;rgba(0,0,0,0.5)&quot;;

ctx.fillStyle = &quot;#CC0000&quot;;
ctx.fillRect(10,10,150,100);

ctx.restore(); 

ctx.fillStyle = &quot;#000000&quot;;
ctx.fillRect(180,10,150,100);   
</code></pre><p>上面代码先用save方法，保存了当前设置，然后绘制了一个有阴影的矩形。接着，使用restore方法，恢复了保存前的设置，绘制了一个没有阴影的矩形。     </p>
<h2 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h2><p>利用JavaScript，可以在canvas元素上很容易地产生动画效果。    </p>
<pre><code>var posX = 20,
    posY = 100;

setInterval(function() {
    context.fillStyle = &quot;black&quot;;
    context.fillRect(0,0,canvas.width, canvas.height);

    posX += 1;
    posY += 0.25;

    context.beginPath();
    context.fillStyle = &quot;white&quot;;

    context.arc(posX, posY, 10, 0, Math.PI*2, true); 
    context.closePath();
    context.fill();
}, 30);   
</code></pre><p>上面代码会产生一个小圆点，每隔30毫秒就向右下方移动的效果。setInterval函数的一开始，之所以要将画布重新渲染黑色底色，是为了抹去上一步的小圆点。通过设置圆心坐标，可以产生各种运动轨迹。先上升后下降。    </p>
<pre><code>var vx = 10,
    vy = -10,
    gravity = 1;

setInterval(function() {
    posX += vx;
    posY += vy;
    vy += gravity;
    // ...
});   
</code></pre><p>上面代码中，x坐标始终增大，表示持续向右运动。y坐标先变小，然后在重力作用下，不断增大，表示先上升后下降。小球不断反弹后，逐步趋于静止。     </p>
<pre><code>var vx = 10,
    vy = -10,
    gravity = 1;

setInterval(function() {
    posX += vx;
    posY += vy;

    if (posY &gt; canvas.height * 0.75) {
          vy *= -0.6;
          vx *= 0.75;
          posY = canvas.height * 0.75;
    }

    vy += gravity;
    // ...
});    
</code></pre><p>上面代码表示，一旦小球的y坐标处于屏幕下方75%的位置，向x轴移动的速度变为原来的75%，而向y轴反弹上一次反弹高度的40%。    </p>
<h2 id="像素处理"><a href="#像素处理" class="headerlink" title="像素处理"></a>像素处理</h2><p>通过getImageData方法和putImageData方法，可以处理每个像素，进而操作图像内容。<br>假定filter是一个处理像素的函数，那么整个对Canvas的处理流程，可以用下面的代码表示。   </p>
<pre><code>if (canvas.width &gt; 0 &amp;&amp; canvas.height &gt; 0) {

    var imageData = context.getImageData(0, 0, canvas.width, canvas.height);

    filter(imageData);

    context.putImageData(imageData, 0, 0);

}    
</code></pre><p>以下是几种常见的处理方法。    </p>
<h2 id="灰度效果"><a href="#灰度效果" class="headerlink" title="灰度效果"></a>灰度效果</h2><p>灰度图（grayscale）就是取红、绿、蓝三个像素值的算术平均值，这实际上将图像转成了黑白形式。假定d[i]是像素数组中一个象素的红色值，则d[i+1]为绿色值，d[i+2]为蓝色值，d[i+3]就是alpha通道值。转成灰度的算法，就是将红、绿、蓝三个值相加后除以3，再将结果写回数组。    </p>
<pre><code>grayscale = function (pixels) {

    var d = pixels.data;

    for (var i = 0; i &lt; d.length; i += 4) {
      var r = d[i];
      var g = d[i + 1];
      var b = d[i + 2];
      d[i] = d[i + 1] = d[i + 2] = (r+g+b)/3;
    }

    return pixels;

};   
</code></pre><h2 id="复古效果"><a href="#复古效果" class="headerlink" title="复古效果"></a>复古效果</h2><p>复古效果（sepia）则是将红、绿、蓝三个像素，分别取这三个值的某种加权平均值，使得图像有一种古旧的效果。<br>sepia = function (pixels) {</p>
<pre><code>var d = pixels.data;

for (var i = 0; i &lt; d.length; i += 4) {
  var r = d[i];
  var g = d[i + 1];
  var b = d[i + 2];
  d[i]     = (r * 0.393)+(g * 0.769)+(b * 0.189); // red
  d[i + 1] = (r * 0.349)+(g * 0.686)+(b * 0.168); // green
  d[i + 2] = (r * 0.272)+(g * 0.534)+(b * 0.131); // blue
}

return pixels;
</code></pre><p>};</p>
<h2 id="红色蒙版效果"><a href="#红色蒙版效果" class="headerlink" title="红色蒙版效果"></a>红色蒙版效果</h2><p>红色蒙版指的是，让图像呈现一种偏红的效果。算法是将红色通道设为红、绿、蓝三个值的平均值，而将绿色通道和蓝色通道都设为0。<br>red = function (pixels) {</p>
<pre><code>var d = pixels.data;

for (var i = 0; i &lt; d.length; i += 4) {
  var r = d[i];
  var g = d[i + 1];
  var b = d[i + 2];
  d[i] = (r+g+b)/3;        // 红色通道取平均值
  d[i + 1] = d[i + 2] = 0; // 绿色通道和蓝色通道都设为0
}

return pixels;
</code></pre><p>};</p>
<h2 id="亮度效果"><a href="#亮度效果" class="headerlink" title="亮度效果"></a>亮度效果</h2><p>亮度效果（brightness）是指让图像变得更亮或更暗。算法将红色通道、绿色通道、蓝色通道，同时加上一个正值或负值。<br>brightness = function (pixels, delta) {</p>
<pre><code>var d = pixels.data;

for (var i = 0; i &lt; d.length; i += 4) {
      d[i] += delta;     // red
      d[i + 1] += delta; // green
      d[i + 2] += delta; // blue   
}

return pixels;
</code></pre><p>};</p>
<h2 id="反转效果"><a href="#反转效果" class="headerlink" title="反转效果"></a>反转效果</h2><p>反转效果（invert）是指图片呈现一种色彩颠倒的效果。算法为红、绿、蓝通道都取各自的相反值（255-原值）。<br>invert = function (pixels) {</p>
<pre><code>var d = pixels.data;

for (var i = 0; i &lt; d.length; i += 4) {
    d[i] = 255 - d[i];
    d[i+1] = 255 - d[i + 1];
    d[i+2] = 255 - d[i + 2];
}

return pixels;
</code></pre><p>};   </p>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/01/31/五大主流浏览器CSS3和HTML5兼容性大比拼/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          五大主流浏览器CSS3和HTML5兼容性大比拼
        
      </div>
    </a>
  
  
    <a href="/2015/01/17/web开发工具/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">web开发工具</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share_jia">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">Share to: &nbsp; </span>
		<a class="jiathis_button_facebook"></a> 
    <a class="jiathis_button_twitter"></a>
    <a class="jiathis_button_plus"></a> 
    <a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>






<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="HTML5-Canvas-API" data-title="HTML5--Canvas API" data-url="http://lanceng.com/2015/01/17/HTML5-Canvas-API/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"true"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>




</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 Smile Zhang
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/lanceng/hexo-theme-yilia" target="_blank">Yilia</a> by Lanceng
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div id="totop" style="position:fixed;bottom:150px;right:50px;cursor: pointer;">
	<a title="返回顶部"><img src="/img/totop.png"/></a>
</div>
<script src="/js/totop.js"></script>

  </div>
</body>
</html>